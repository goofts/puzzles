<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8" />
    <title>TopCoder SRM 158 - 1000: Jumper</title>
    
    <link type="image/x-icon" rel="shortcut icon" href="http://www.topcoder.com/i/favicon.ico"/>
    

    
    <style type="text/css">
        /* font */
body {
    font-family: Helvetica, Arial, Verdana, sans-serif;
    font-size: 16px;
    line-height: 1.2em;
}
ul.constraints > li:before, ul.notes > li:before {
    font-family: monospace;
    font-weight: normal;
}
.heading {
    font-weight: bold;
    font-size: 175%;
    line-height: 1.2em;
}
.section .section-title {
    font-weight: bold;
    font-size: 125%;
}
ol.testcases > li:before {
    font-family: monospace;
}
type {
    font-weight: bold;
    font-family: monospace;
}
li.testcase .data {
    font-family: monospace;
    line-height: 1.5em;
}

/* layout */
.heading {
    margin-top: 0.1em;
    margin-bottom:0.1em;
    text-align: center;
}
.section .section-title {
    margin-top : 1em;
    margin-bottom: 1em;
}
.problem-intro, note, user-constraint {
    padding-left: 1.25em;
}

/* Lists */
ul.constraints, ul.notes, ul.variables, ul.problem-definition-lines {
    list-style-type: none;
    padding: 0px;
}
ul.constraints > li:before {
    content: "-";
    position:relative;
    margin-left: 0px; /* optional, for multiline li element */
    left: 0.625em;
}
ul.notes > li:before {
    content: "-";
    position:relative;
    margin-left: 0px; /* optional, for multiline li element */
    left: 0.625em;
}

/* Testcases */
li.testcase {
    line-height: 1.1em;
    padding-top: 0.625em;
    padding-bottom: 0.625em;
    overflow: auto;
}
li.testcase > .testcase-content > div { padding-bottom: 0.5em; padding-left: 1em; }

li.testcase .testcase-comment {
    margin: 0;
    padding-left: 1em;
}
.testcase-comment p:first-child { margin-top: 0; }
.testcase-comment p:last-child { margin-bottom: 0; }

li.testcase .testcase-content {
    margin: 0.31em;
}

/* Data and variables */
.testcase-output {
    padding: 0.2em 1em 0.2em 0em;
}
.variables, .testcase-output {
    margin-left: 0.5em;
    display: table;
    margin-bottom: 0px;
    margin-top: 0px;
}
.variable {
    display: table-row;
}
.variable .name {
    padding: 0.2em 0em 0.2em 1em;
    font-weight: bold;
    display: table-cell;
    text-align: right;
}
.testcase-output .prefix {
    padding: 0.2em 0em 0.2em 1em;
    display: table-cell;
}
.testcase-output .prefix:after {
    content : ":";
    padding-right: 0.5em;
}
.variable .name:after {
    font-weight: bold;
    content : ":";
    padding-right: 0.5em;
}
.variable .value, .testcase-output .value {
    padding: 0.2em 1em 0.2em 0em;
    display: table-cell;
}
ol.testcases {
    padding: 0px;
    counter-reset: test_number -1;
}
ol.testcases > li {
    list-style:none;
}
ol.testcases > li:before {
    counter-increment:test_number;
    display: block;
    clear: both;
    content:counter(test_number) ")";
    color: inherit;
    background: inherit;
}

/* Problem Definition */
.problem-definition, .problem-limits {
    padding-left: 1.25em;
}
.problem-definition-lines, .limit-lines {
    display: table;
    margin-top: 0px;
    margin-bottom: 0px;
    padding-left: 0px;
}
.definition-line, .limit-line {
    display: table-row;
    height: 1.5em;
    overflow: auto;
}
.limit-name:after {
    content: ":";
    margin-right: 1em;
}
.definition-name, .definition-value, .limit-name, .limit-value {
    display: table-cell;
}
.definition-value {
    padding-left: 0.5em;
}
.definition-name:after {
    content: ":";
}
#contest-division:before {
    content: "Div ";
}
#problem-score:before {
    content: "- Problem ";
}
#problem-name {
    display: block;
}

/* Tags, hidden default */
.tag {
    visibility: hidden;
    position: absolute;
}

        body {
    /* font color */
    color: #333333;
    /* background color */
    background-color: white;
}
.section .section-title {
    /* title color */
    color: black;
}
li.testcase .data {
    /* highlight color */
    background: #eee;
}

    </style>
    
    
    

</head>

<body>
    <h1 class="heading">
        <span id='contest-name'>SRM 158</span>
        <span id='contest-division'>1</span>
        <span id='problem-score'>1000</span>
        <span id='problem-name'>Jumper</span>
    </h1>

    <hr />

    <!-- Problem Statement -->
    <div class="section">
        <h2 class="section-title">Problem Statement</h2>
        <div class="problem-intro">
            <intro><p>
In a certain video game, a jumping player must jump across an area which has floating hoverpads in it.  The hoverpads are organized on the screen into evenly spaced rows that move left or right across the screen with a constant speed and direction.  The jumper can only cross the area by jumping onto the pads.  If the jumper lands on a space that is not a pad, he loses the game.  If the jumper is standing on a pad that goes off the side of the screen, he loses the game.  The jumper starts out on the bottom of the screen in a non-moving row of solid ground.  He must use the pads to jump all the way to the top of the screen, where there is another non-moving row of solid ground.  The score of the game depends on how fast the player jumps to the other side.
</p>

<p>
The screen is made up of 1x1 blocks and is 20 blocks wide.  Each pad is comprised of 1 or more 1x1 blocks in a horizontal line.  The jumper can only jump a distance of 1 block at a time, and can only jump from one row to another, or to another part of the pad he is currently on that is 1 block away.  At the beginning of each second, the jumper either jumps or does not move, and then the pads move a certain distance for the remainder of the second.  Jumping takes no time at all, but the jumper must wait for the next second to move again.
</p>

<p>
You will be given three arguments.  <b>patterns</b> will be a <type>String[]</type>, with each element having a 5-character pattern in it.  In each pattern, a '#' represents hoverpad, and a '.' represents empty space.  <b>speeds</b> will be a <type>int[]</type> which represents the speeds of each of the <b>patterns</b> in blocks per second.  Positive speeds are to the right, negative speeds are to the left.  <b>rows</b> is a <type>String</type> where each character specifies what pattern and speed each row has (Note that this does not include the non-moving solid ground on the bottom and top of the screen).  Characters that appear earlier in <b>rows</b> represent rows that are closer to the player's starting row.  For example, if <b>rows</b> starts with &quot;01&quot;, it would mean that the first row (the row closest to the starting row) is using element 0 of <b>patterns</b> and <b>speeds</b> to define its hoverpads, and the next row is using element 1.
</p>

<p>
Each row starts out filled with repeated values of its given pattern.  For example, the pattern <tt>&quot;#..##&quot;</tt> would start out as:<br />
<tt>&quot;#..###..###..###..##&quot;</tt><br />
The speed determines how fast and in what direction the pads move.  As the pads move off the screen, more pads move in on the opposite side of the screen to fill in the space.  The pads which move in take on exactly the same pattern as the pads that moved out.  For example, if the above pattern had a speed of 3, then <tt>&quot;.##&quot;</tt> would move off of the right side of the screen and <tt>&quot;.##&quot;</tt> would move in on the left side, to get:<br />
<tt>&quot;.###..###..###..###.&quot;</tt><br />
Note that if the player were standing on either of the blocks which moved off the screen, he would lose the game.
</p>

<p>
The character starts on the bottom of the screen in the leftmost column on solid ground (which has no holes and does not move).  He can wait any amount of time before jumping onto the first row of hoverpads, and may jump left or right on the solid ground.  The player may also jump back to solid ground after jumping to a hoverpad.  The player wins if he jumps off of the last row of pads to the solid ground at the top of the screen.
</p>

<p>
Your method should return the minimum time it takes to get from the bottom to the top of the screen, or -1 if it is not possible.
</p>
</intro>
        </div>
    </div>
    
    <!-- Problem definition -->
    
    <div class="section" id="definition">
        <h2 class="section-title">Definition</h2>
        <div class="problem-definition">
            <ul class="problem-definition-lines">
                <li class="definition-line" id='class-line'>
                    <span class='definition-name'>Class</span>
                    <span class='definition-value'>Jumper</span>
                </li>
                <li class="definition-line" id='method-line'>
                    <span class='definition-name'>Method</span>
                    <span class='definition-value'>minTime</span>
                </li>
                <li class="definition-line" id='parameters-line'>
                    <span class='definition-name'>Parameters</span>
                    <span class='definition-value'>
                    
                        vector&lt;string&gt;
                    , 
                        vector&lt;int&gt;
                    , 
                        string
                    
                    </span>
                </li>
                <li class="definition-line" id='returns-line'>
                    <span class='definition-name'>Returns</span>
                    <span class='definition-value'>
                        int
                    </span>
                </li>
                <li class="definition-line" id='signature-line'>
                    <span class='definition-name'>Method signature</span>
                    <span class='definition-value'>
                        int minTime(vector&lt;string&gt; patterns, vector&lt;int&gt; speeds, string rows)
                    </span>
                </li>
            </ul>
            <div class="problem-definition-public-tip">(be sure your method is public)</div>
        </div>        
    </div>
    

    <!-- Limits -->
    <div class="section">
        <h2 class="section-title">Limits</h2>
        <div class='problem-limits'>
            <ul class="limit-lines">
                <li class='limit-line'>
                    <span class='limit-name'>Time limit (s)</span>
                    <span class='limit-value'>2.000</span>
                </li>
                <li class='limit-line'>
                    <span class='limit-name'>Memory limit (MB)</span>
                    <span class='limit-value'>64</span>
                </li>
            </ul>
        </div>
    </div>

    
    <!-- Notes -->
    <div class="section">
        <h2 class="section-title">Notes</h2>
        <ul class="notes">
        
            <li><note>Since it takes no time to jump, the pads do not move while the actual jump is occurring.  They move after the jumper lands.</note></li>
        
            <li><note>A pad with the player on it also moves the player.</note></li>
        
        </ul>
    </div>
    
    
    <!-- Constraints -->
    <div class="section">
        <h2 class="section-title">Constraints</h2>
        <ul class="constraints">
        
            <li><user-constraint><b>patterns</b> will have between 1 and 4 elements, inclusive</user-constraint></li>
        
            <li><user-constraint>Each element of <b>patterns</b> will consist of exactly 5 characters, and will only contain the characters '#' and '.'.</user-constraint></li>
        
            <li><user-constraint><b>speeds</b> will have the same number of elements as patterns.</user-constraint></li>
        
            <li><user-constraint>Each element of <b>speeds</b> will be between -10 and 10, inclusive except 0.</user-constraint></li>
        
            <li><user-constraint><b>rows</b> will have between 2 and 20 characters, inclusive.</user-constraint></li>
        
            <li><user-constraint>Each character in <b>rows</b> will be a digit between 0 and the number of elements in <b>patterns</b> - 1, inclusive.</user-constraint></li>
        
        </ul>
    </div>

    <!-- Test cases -->
    <div class="section">
        <h2 class="section-title">Test cases</h2>
        <ol class="testcases" start='0'>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">patterns</span>
                                <span class="value data">
                                
                                    {&quot;###..&quot;,<br />&nbsp;&quot;..###&quot;}
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">speeds</span>
                                <span class="value data">
                                
                                    { 1, 1 }
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">rows</span>
                                <span class="value data">
                                
                                    &quot;01&quot;
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            5
                        
                        </span>
                    </div>
                    
                    <div class="testcase-annotation">
                        <div class='tag'>note</div>
                        <div class="testcase-comment"><p>The screen looks like this at the beginning:</p>

<pre>
..###..###..###..###
###..###..###..###..
P###################
</pre>

<p>The player can jump up once, and then both rows of pads move to the right 1 space.  The screen is now:</p>

<pre>
#..###..###..###..##
.P##..###..###..###.
####################
</pre>

<p>The player can now jump twice to the right.  By this time, the pads have moved over twice:</p>

<pre>
###..###..###..###..
#..##P..###..###..##
####################
</pre>

<p>Now, the player jumps up to the second row of pads:</p>

<pre>
.###..P##..###..###.
##..###..###..###..#
####################
</pre>

<p>And finally, jumps up one more time to victory.</p></div>
                    </div>
                    
               
                </div>
            </li>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">patterns</span>
                                <span class="value data">
                                
                                    {&quot;###..&quot;,<br />&nbsp;&quot;..###&quot;}
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">speeds</span>
                                <span class="value data">
                                
                                    { 5, 5 }
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">rows</span>
                                <span class="value data">
                                
                                    &quot;01&quot;
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            5
                        
                        </span>
                    </div>
                    
                    <div class="testcase-annotation">
                        <div class='tag'>note</div>
                        <div class="testcase-comment"><p>The player cannot follow the same pattern as above, because he would lose when the pads go off the right side of the screen.  Instead, he can jump to the right twice, and then he has a straight path up.  In the following sequence, remember that the pads move to the right 5 spaces, even though they do not appear to move from frame to frame:</p>

<pre>
..###..###..###..###
###..###..###..###..  Start
P###################

..###..###..###..###
###..###..###..###..  Right
#P##################

..###..###..###..###
###..###..###..###..  Right
##P#################

..###..###..###..###
###..##P..###..###..  Up (pad carries player right 5 spaces)
####################

..###..###..P##..###
###..###..###..###..  Up (pad carries player right 5 spaces)
####################

Final jump up.
</pre></div>
                    </div>
                    
               
                </div>
            </li>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">patterns</span>
                                <span class="value data">
                                
                                    {&quot;....#&quot;,<br />&nbsp;&quot;....#&quot;}
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">speeds</span>
                                <span class="value data">
                                
                                    { 4, 5 }
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">rows</span>
                                <span class="value data">
                                
                                    &quot;0111&quot;
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            9
                        
                        </span>
                    </div>
                    
                    <div class="testcase-annotation">
                        <div class='tag'>note</div>
                        <div class="testcase-comment"><p>In this example, the only way to make it up to the top is to wait for the first row of pads to line up with the left-most column.  Then the player barely has time to jump up through all three other rows of pads before jumping to the very top.  It takes 4 seconds for the pads to line up with the player, so he waits for 4 seconds, then he jumps up 5 times to get to the top.</p></div>
                    </div>
                    
               
                </div>
            </li>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">patterns</span>
                                <span class="value data">
                                
                                    {&quot;#....&quot;,<br />&nbsp;&quot;#....&quot;}
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">speeds</span>
                                <span class="value data">
                                
                                    { -4, -5 }
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">rows</span>
                                <span class="value data">
                                
                                    &quot;0111&quot;
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            24
                        
                        </span>
                    </div>
                    
                    <div class="testcase-annotation">
                        <div class='tag'>note</div>
                        <div class="testcase-comment">This is the same as the last example, except everything is reversed.  Since the only safe place to jump off the bottom is the right-most square, the player must first jump right 19 spaces before jumping up 5 times.</div>
                    </div>
                    
               
                </div>
            </li>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">patterns</span>
                                <span class="value data">
                                
                                    {&quot;#####&quot;,<br />&nbsp;&quot;#####&quot;}
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">speeds</span>
                                <span class="value data">
                                
                                    { 10, 10 }
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">rows</span>
                                <span class="value data">
                                
                                    &quot;01&quot;
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            -1
                        
                        </span>
                    </div>
                    
                    <div class="testcase-annotation">
                        <div class='tag'>note</div>
                        <div class="testcase-comment">Although a straight path exists, the player cannot jump up twice without hitting the wall on the right.</div>
                    </div>
                    
               
                </div>
            </li>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">patterns</span>
                                <span class="value data">
                                
                                    {&quot;#####&quot;,<br />&nbsp;&quot;#####&quot;,<br />&nbsp;&quot;.....&quot;}
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">speeds</span>
                                <span class="value data">
                                
                                    { 1, -1, 1 }
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">rows</span>
                                <span class="value data">
                                
                                    &quot;01010101010101010102&quot;
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            -1
                        
                        </span>
                    </div>
                    
                    <div class="testcase-annotation">
                        <div class='tag'>note</div>
                        <div class="testcase-comment">Be careful of timeouts.</div>
                    </div>
                    
               
                </div>
            </li>
            
            <li class="testcase">
                <div class="testcase-content">
                    <div class="testcase-input">
                        <div class='tag'>input</div>
                        <ul class="variables">
                        
                            <li class="variable data">
                                <span class="name data">patterns</span>
                                <span class="value data">
                                
                                    {&quot;#....&quot;,<br />&nbsp;&quot;#....&quot;,<br />&nbsp;&quot;#....&quot;}
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">speeds</span>
                                <span class="value data">
                                
                                    { 5, -5, 6 }
                                
                                </span>
                            </li>
                        
                            <li class="variable data">
                                <span class="name data">rows</span>
                                <span class="value data">
                                
                                    &quot;2012&quot;
                                
                                </span>
                            </li>
                        
                        </ul>
                    </div>
                    <div class="testcase-output">
                        <div class='tag'>output</div>
                        <span class="prefix data">Returns</span>
                        <span class="value data">
                        
                            12
                        
                        </span>
                    </div>
                    
                    <div class="testcase-annotation">
                        <div class='tag'>note</div>
                        <div class="testcase-comment"><p>
Here, in order to use 12 jumps, the player must jump back at least once.  One possible ordering of jumps is:
</p>

<pre>Right, Right, Right, Right, Up, Up, Up, Stand, Down, Up, Up, Up.</pre></div>
                    </div>
                    
               
                </div>
            </li>
            
        </ol>
    </div>
    <hr />

    This problem statement is the exclusive and proprietary property of TopCoder, Inc. Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited. (c)2003, TopCoder, Inc. All rights reserved.
</body>
</html>
